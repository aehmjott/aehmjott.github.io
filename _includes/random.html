<html>
    <head>
        <title></title>
        <style>
            table {
                margin-bottom: 10px;
            }
            
            table th, table td {
                padding: 5px 7px;
            }

            .imageContainer {
                text-align: center;
            }

            #captureImg {
                margin-top: 10px;
                width: 25%;
                height: auto;
            }
        </style>
    </head>
    <body>
    
    <div id="content">
        <table>
            <tr>
                <th> ISO </th>
                <th> Belichtungszeit </th>
                <th> Blende </th>
            </tr>
            <tr>
                <td id="iso" width="33.33%"> ??? </td>
                <td id="time" width="33.33%"> ??? </td>
                <td id="aperture"> ??? </td>
            </tr>
        </table>

        <table>
            <tr><th colspan="3"> Brennweite </th></tr>
            <tr><td id="focal_length" colspan="3"> ??? </td></tr>   
        </table>

        <table>
            <tr><th colspan="3"> Ausrüstung </th></tr>
            <tr><td id="equipment" colspan="3"> ??? </td></tr>   
        </table>

        <table>
            <tr><th colspan="3"> Thema </th></tr>
            <tr><td id="theme" colspan="3"> ??? </td></tr>   
        </table>

        <table>
            <tr><th colspan="3"> Ding </th></tr>
            <tr><td id="thing" colspan="3"> ??? </td></tr>   
        </table>

    </div>

    <button onclick="settings()"> Neu Laden </button>
    <button onclick="saveToCanvas()"> Als Bild speichern </button>
    
    <p class="imageContainer">
        <img id="captureImg" download="test.png"><img>
    </p>

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        function randomItem (arr) {
            return arr[arr.length * Math.random() | 0]
        }

        function randomItems (arr, count) {
            var result = []            
            while (result.length < count || result.length === arr.length) {
                var item = randomItem(arr)
                if (result.indexOf(item) === -1) {
                    result.push(item)        
                }
            }
            return result
        }

        function saveToCanvas () {
            var content = document.getElementById("content")
            const h = content.style.height
            const w = content.style.width

            const sX = window.scrollX
            const sY = window.scrollY

            content.style.height = screen.heigth
            content.style.width = screen.width

            window.scrollTo(0,0)
            
            var img = document.getElementById("captureImg")
            img.src = ""
            
            html2canvas(content, {
            }).then(function(canvas){
                 img.src = canvas.toDataURL("image/png")
                 content.style.height = h
                 content.style.width = w
                 window.scrollTo(sX, sY)
            })
        }

        function settings () {
            var iso = [100, 200, 400, 800, 1600, 3200]
            var time = ["1s", "1/2s", "1/10s", "1/25s", "1/50s", "1/100s", "1/500s", "1/1000s"]
            var aperture = ["2.0", "2.8", "4.0", "5.6", "8.0", "11.0", "16.0"]

            var focal_lengths = ["10mm", "16mm", "20mm", "24mm", "35mm", "50mm", "70mm", "90mm", "150mm", "200mm"]

            var equipment = ["Stativ",
                             "Blitz",
                             "Reflektor",
                             "Filter",
                             "Zoom-Objektiv",
                             "Wechselobjektiv",
                             "Ersatzakkus",
                             "Fernauslöser"
            ]

            var themes = [
                "Licht und Schatten", 
                "Möwen",
                "Goldener Schnitt", 
                "Sprichwort",
                "Mein Lieblingsort",
                "Leading Lines",
                "Symmetrie",
                "Zwei Farben",
                "Manuelle Belichtung",
                "Selbstportrait",
                "Schlechtes Wetter",
                "Schwarz und Weiß",
                "Brücken",
                "Tanz",
                "Stadtgeschichten",
                "Land in Sicht",
                "Fluss",
                "Groß und Klein",
                "Abstrakt",
                "Morgenstimmung",
                "Reflexionen",
                "Bäume",
                "Blaue Stunde",
                "Rund oder Eckig?",
                "Kalt und warm",
                "Rot",
                "Wolken",
                "Natürlicher Rahmen",
                "Makro",
                "Struktur und Muster",
                "Überbelichtet",
                "Unterbelichtet",
                "Industrie",
                "Wasser",
                "Alt und Neu",
                "Drei Farben",
                "Ein Bild im Bild",
                "Blitzen bei Tageslicht",
                "Fokussiert",
                "Silhouette",
                "Hoch hinaus",
                "Der Wald",
                "Sportlich!",
                "Wilde Tiere",
                "Ruhe und Lärm",
                "Langzeitbelichtung",
                "Essen",
                "Nacht",
                "Gelb",
                "Perspektivwechsel",
                "Auf den Kopf gestellt",
                "Hände",
                "Innen und Außen",
                "Glas",
                "Gold",
                "Geschichte",
                "Früher war alles besser.",
                "Der frühe Vogel fängt den Wurm.",
                "Familie",
                "Neon",
                "Süß",
                "Salzig",
                "Sauer",
                "Urban",
                "Hitzefrei",
                "Schule",
                "Gesichter",
                "Nichts",
                "Es werde Licht!",
                "Fake!",
                "Regeln sind dazu da, gebrochen zu werden.",
                "Boote",
                "Blumen",
                "Wut",
                "Neuanfang",
                "Unter dem Radar",
                "Gute Nacht",
                "Schatten",
                "Sonne",
                "Studieren",
                "Universität",
                "Nummern",
                "Die Stadt ohne Menschen",
                "Modern",
                "Gute Aussichten",
                "Vögel",
                "Lampen",
                "Jund und Alt",
                "Feiern"
            ]
            
            
            var amounts = [
                "Ein",
                "Zwei",
                "Drei",
                "Vier",
                "Fünf",
                "Sechs",
                "Sieben"
            ]

            var attributes = [
                "gelbe",
                "türkise",
                "orangene",
                "rote",
                "grüne",
                "blaue",
                "braune",
                "violette",
                "weiße",
                "schwarze",
                "farblose",
                "transparente",
                "dunkle",
                "helle",   
                "winzige",
                "kleine",
                "große",
                "riesige",
                "lange",
                "kurze",
                "hohe",
                "niedrige",
                "schöne",
                "hässliche",
                "fliegende",
                "glänzende",
                "schimmernde",
                "schlichte",
                "extravagante",
                "neue",
                "alte",
                "analoge",
                "technische",
                "moderne",
                    
                "aus Stahl",
                "aus Holz",
                "aus Eisen",
                "aus Metall",
                "aus Stoff",
                "aus Baumwolle",
                "aus Beton",
                "aus Stein",
                "aus Plastik",
                "aus Glas",
                "aus Papier",
                "aus einem ungewöhnlichen Material"               
            ]

            document.getElementById("iso").innerHTML = randomItem(iso)
            document.getElementById("time").innerHTML = randomItem(time)
            document.getElementById("aperture").innerHTML = randomItem(aperture)

            document.getElementById("focal_length").innerHTML = randomItem(focal_lengths)

            var picked_equipment = randomItems(equipment, equipment.length / 4)
            document.getElementById("equipment").innerHTML = equipment.map(function(item) {
                return "<span style='opacity:" + (picked_equipment.indexOf(item) === -1 ? 0.25 : 1.0).toString() + "' >" + item + "</span>"
            }).join(" • ")
            
            document.getElementById("theme").innerHTML = randomItem(themes)

            var amount = randomItem(amounts)
            var picked_attributes = randomItems(attributes, 2).map(function(attr){
                if (attr.startsWith("aus")) {
                    return attr
                }
                return (amount === "Ein") ? attr + "s" : attr
            })

            var a0 = picked_attributes[0]
            var a1 = picked_attributes[1]

            var t = amount !== "Ein" ? "Dinge" : "Ding" 
           
            var thing = []      
            if(a0.startsWith("aus")) {
                if(a1.startsWith("aus")) {
                    thing = [amount, t, a0, "und", a1]
                }
                else {
                    thing = [amount, a1, t, a0]
                }
            }
            else {
                if(a1.startsWith("aus")) {
                    thing = [amount, a0, t, a1]
                }
                else {
                    thing = [amount, a0, "und", a1, t]
                }
            }

            document.getElementById("thing").innerHTML = thing.join(" ") + "."
            document.getElementById("captureImg").src = ""
        }
        settings()
    </script>
    </body>
</html>

